{"version":3,"file":"main.js","sourceRoot":"","sources":["../../apps/custom-app-nestjs/src/main.ts"],"names":[],"mappings":";;;AAAA,uCAA2C;AAC3C,6CAAiE;AACjE,4BAA0B;AAC1B,mDAA0C;AAC1C,iDAA6C;AAC7C,gDAA6C;AAE7C;;EAEE;AAEF;;GAEG;AACH,IAAI,eAAM,CAAC,GAAG,CAAC,IAAI,KAAK,SAAS,EAAE;IACjC,yBAAQ,CAAC;QACP,OAAO,EAAE,eAAM,CAAC,OAAO,CAAC,IAAI;QAC5B,KAAK,EAAE,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAK;KACrD,CAAC,CAAC;CACJ;AACD,SAAe,SAAS;;QACtB;;WAEG;QACH,MAAM,GAAG,GAAG,MAAM,kBAAW,CAAC,MAAM,CAClC,sBAAS,CAAC,OAAO,CAAC;YAChB,SAAS,EAAE,CAAC,GAAG,eAAM,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE,GAAG,eAAM,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;YACnE,iBAAiB,EAAE,eAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE;SACnD,CAAC,EACF,EAAE,IAAI,EAAE,IAAI,EAAE,CACf,CAAC;QAEF;;WAEG;QACH,eAAM,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YAC5C,GAAG,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH;;WAEG;QACH,IAAI,eAAe,GAAG,IAAI,yBAAe,EAAE;aACxC,QAAQ,CAAC,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;aACrC,cAAc,CAAC,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC;aAClD,eAAe,CAAC,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC;aACpD,cAAc,CAAC,mBAAmB,EAAE,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC;aACpE,UAAU,CAAC,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC;aAC9C,UAAU,CAAC,eAAM,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC;aAC1C,aAAa,CAAC,eAAe,EAAE,QAAQ,CAAC,CAAC;QAC5C,eAAe,GAAG,eAAe,CAAC,UAAU,CAC1C,eAAM,CAAC,GAAG,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAClD,eAAM,CAAC,GAAG,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CACnD,CAAC;QACF,uBAAa,CAAC,KAAK,CACjB,UAAU,EACV,GAAG,EACH,uBAAa,CAAC,cAAc,CAAC,GAAG,EAAE,eAAe,CAAC,KAAK,EAAE,CAAC,CAC3D,CAAC;QAEF;;WAEG;QACH,MAAM,GAAG,CAAC,MAAM,CAAC,eAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAElC;;;;;UAKE;IACJ,CAAC;CAAA;AACD,SAAS,EAAE,CAAC","sourcesContent":["import { NestFactory } from \"@nestjs/core\";\nimport { DocumentBuilder, SwaggerModule } from \"@nestjs/swagger\";\nimport \"reflect-metadata\";\nimport { register } from \"tsconfig-paths\";\nimport { AppModule } from \"./app/app.module\";\nimport { config } from \"./app/config/config\";\n\n/* hmr\ndeclare const module: any;\n*/\n\n/**\n * Link tsconfig paths\n */\nif (config.env.name !== \"develop\") {\n  register({\n    baseUrl: config.project.path,\n    paths: config.project.tsconfig.compilerOptions.paths\n  });\n}\nasync function bootstrap() {\n  /**\n   * Create nest application\n   */\n  const app = await NestFactory.create(\n    AppModule.forRoot({\n      providers: [...config.core.providers(), ...config.auth.providers()],\n      passportProviders: config.auth.passportProviders()\n    }),\n    { cors: true }\n  );\n\n  /**\n   * Add static folders\n   */\n  config.project.staticFolders.forEach(folder => {\n    app.useStaticAssets(folder);\n  });\n\n  /**\n   * Init swagger\n   */\n  let documentBuilder = new DocumentBuilder()\n    .setTitle(config.project.package.name)\n    .setDescription(config.project.package.description)\n    .setContactEmail(config.project.package.author.email)\n    .setExternalDoc(\"Project on Github\", config.project.package.homepage)\n    .setLicense(config.project.package.license, \"\")\n    .setVersion(config.project.package.version)\n    .addBearerAuth(\"Authorization\", \"header\");\n  documentBuilder = documentBuilder.setSchemes(\n    config.env.protocol === \"https\" ? \"https\" : \"http\",\n    config.env.protocol === \"https\" ? \"http\" : \"https\"\n  );\n  SwaggerModule.setup(\n    \"/swagger\",\n    app,\n    SwaggerModule.createDocument(app, documentBuilder.build())\n  );\n\n  /**\n   * Start nest application\n   */\n  await app.listen(config.env.port);\n\n  /* hmr\n  if (module.hot) {\n    module.hot.accept();\n    module.hot.dispose(() => app.close());\n  }\n  */\n}\nbootstrap();\n"]}