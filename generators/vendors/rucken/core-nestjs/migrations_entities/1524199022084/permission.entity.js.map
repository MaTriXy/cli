{"version":3,"file":"permission.entity.js","sourceRoot":"","sources":["../../../../../libs/rucken/core-nestjs/src/migrations_entities/1524199022084/permission.entity.ts"],"names":[],"mappings":";;;AAAA,qDAAsE;AACtE,qCAUiB;AACjB,sFAAiF;AACjF,+DAAiE;AACjE,iDAAoD;AAGpD,IAAa,uBAAuB,GAApC,MAAa,uBAAuB;IADpC;QAGE,OAAE,GAAW,SAAS,CAAC;QAKvB,SAAI,GAAW,SAAS,CAAC;QAKzB,UAAK,GAAW,SAAS,CAAC;QAI1B,gBAAW,GAA6B,SAAS,CAAC;IAgCpD,CAAC;IAdC,iBAAiB;QACf,MAAM,MAAM,GAAG,8BAAY,CAAC,IAAI,EAAE,EAAE,eAAe,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;QAC1E,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,MAAM,IAAI,+CAAqB,CAAC,MAAM,CAAC,CAAC;SACzC;IACH,CAAC;IAGD,cAAc;QACZ,MAAM,MAAM,GAAG,8BAAY,CAAC,IAAI,EAAE,EAAE,eAAe,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;QAC1E,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;YACrB,MAAM,IAAI,+CAAqB,CAAC,MAAM,CAAC,CAAC;SACzC;IACH,CAAC;CACF,CAAA;AA9CC;IADC,gCAAsB,EAAE;;mDACF;AAKvB;IAHC,gBAAM,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;IACvB,4BAAU,EAAE;IACZ,2BAAS,CAAC,GAAG,CAAC;;qDACU;AAKzB;IAHC,gBAAM,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;IACvB,4BAAU,EAAE;IACZ,2BAAS,CAAC,GAAG,CAAC;;sDACW;AAI1B;IAFC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,8CAAwB,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC5E,oBAAU,CAAC,EAAE,IAAI,EAAE,iBAAiB,EAAE,CAAC;sCAC3B,8CAAwB;4DAAa;AAelD;IAbC,oBAAU,CAAC,IAAI,CAAC,EAAE,CAAC,iCAAkB,CAAC;IACtC,mBAAS,CAAC;QAET,IAAI,EAAE,mBAAmB;QACzB,UAAU,EAAE;YACV,IAAI,EAAE,eAAe;YACrB,oBAAoB,EAAE,IAAI;SAC3B;QACD,iBAAiB,EAAE;YACjB,IAAI,EAAE,UAAU;YAChB,oBAAoB,EAAE,IAAI;SAC3B;KACF,CAAC;;uDAC2B;AAG7B;IADC,sBAAY,EAAE;;;;gEAMd;AAGD;IADC,sBAAY,EAAE;;;;6DAMd;AA/CU,uBAAuB;IADnC,gBAAM,CAAC,EAAE,IAAI,EAAE,aAAa,EAAE,CAAC;GACnB,uBAAuB,CAgDnC;AAhDY,0DAAuB","sourcesContent":["import { IsNotEmpty, MaxLength, validateSync } from 'class-validator';\nimport {\n  BeforeInsert,\n  BeforeUpdate,\n  Column,\n  Entity,\n  JoinColumn,\n  JoinTable,\n  ManyToMany,\n  ManyToOne,\n  PrimaryGeneratedColumn\n} from 'typeorm';\nimport { CustomValidationError } from '../../exceptions/custom-validation.error';\nimport { ContentType1524199022084 } from './content-type.entity';\nimport { Group1524199022084 } from './group.entity';\n\n@Entity({ name: 'permissions' })\nexport class Permission1524199022084 {\n  @PrimaryGeneratedColumn()\n  id: number = undefined;\n\n  @Column({ length: 100 })\n  @IsNotEmpty()\n  @MaxLength(100)\n  name: string = undefined;\n\n  @Column({ length: 255 })\n  @IsNotEmpty()\n  @MaxLength(255)\n  title: string = undefined;\n\n  @ManyToOne(type => ContentType1524199022084, { eager: true, nullable: true })\n  @JoinColumn({ name: 'content_type_id' })\n  contentType: ContentType1524199022084 = undefined;\n\n  @ManyToMany(type => Group1524199022084)\n  @JoinTable({\n    // not work on run cli migration:\n    name: 'group_permissions',\n    joinColumn: {\n      name: 'permission_id',\n      referencedColumnName: 'id'\n    },\n    inverseJoinColumn: {\n      name: 'group_id',\n      referencedColumnName: 'id'\n    }\n  })\n  groups: Group1524199022084[];\n\n  @BeforeInsert()\n  doBeforeInsertion() {\n    const errors = validateSync(this, { validationError: { target: false } });\n    if (errors.length > 0) {\n      throw new CustomValidationError(errors);\n    }\n  }\n\n  @BeforeUpdate()\n  doBeforeUpdate() {\n    const errors = validateSync(this, { validationError: { target: false } });\n    if (errors.length > 0) {\n      throw new CustomValidationError(errors);\n    }\n  }\n}\n"]}