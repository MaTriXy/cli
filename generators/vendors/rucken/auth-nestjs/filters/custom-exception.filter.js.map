{"version":3,"file":"custom-exception.filter.js","sourceRoot":"","sources":["../../../../libs/rucken/auth-nestjs/src/filters/custom-exception.filter.ts"],"names":[],"mappings":";;;;AAAA,2CAA2F;AAC3F,+CAAiD;AAGjD,IAAa,qBAAqB,6BAAlC,MAAa,qBAAqB;IACxB,QAAQ,CAAC,SAA4B,EAAE,IAAmB,EAAE,IAAS,EAAE,MAAe;QAC5F,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAChC,MAAM,QAAQ,GAAG,GAAG,CAAC,WAAW,EAAE,CAAC;QACnC,MAAM,OAAO,GAAG,GAAG,CAAC,UAAU,EAAE,CAAC;QACjC,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,EAAE,SAAS,EAAE,uBAAqB,CAAC,IAAI,CAAC,CAAC;QAC/E,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,mBAAU,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACvE,CAAC;IAED,KAAK,CAAC,SAA4B,EAAE,IAAmB;QACrD,IAAI,SAAS,YAAY,gCAAiB,EAAE;YAC1C,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE;gBAC7B,OAAO,EAAE,SAAS,CAAC,OAAO;aAC3B,CAAC,CAAC;SACJ;IACH,CAAC;CACF,CAAA;AAhBY,qBAAqB;IADjC,cAAK,CAAC,gCAAiB,CAAC;GACZ,qBAAqB,CAgBjC;AAhBY,sDAAqB","sourcesContent":["import { ArgumentsHost, Catch, ExceptionFilter, HttpStatus, Logger } from '@nestjs/common';\nimport { JsonWebTokenError } from 'jsonwebtoken';\n\n@Catch(JsonWebTokenError)\nexport class CustomExceptionFilter implements ExceptionFilter {\n  private response(exception: JsonWebTokenError, host: ArgumentsHost, data: any, status?: number) {\n    const ctx = host.switchToHttp();\n    const response = ctx.getResponse();\n    const request = ctx.getRequest();\n    Logger.error(JSON.stringify(exception), undefined, CustomExceptionFilter.name);\n    response.status(status ? status : HttpStatus.BAD_REQUEST).json(data);\n  }\n\n  catch(exception: JsonWebTokenError, host: ArgumentsHost) {\n    if (exception instanceof JsonWebTokenError) {\n      this.response(exception, host, {\n        message: exception.message\n      });\n    }\n  }\n}\n"]}